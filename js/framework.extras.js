!function(a){"use strict";void 0===a.oc&&(a.oc={});var t="oc-loading";a(document).on("ajaxSetup","[data-request][data-request-flash]",(function(t,e){e.options.handleErrorMessage=function(t){a.oc.flashMsg({text:t,class:"error"})},e.options.handleFlashMessage=function(t,e){a.oc.flashMsg({text:t,class:e})}})),a(document).on("ajaxValidation","[data-request][data-request-validate]",(function(t,e,o,s){var i,n=a(this).closest("form"),d=a("[data-validate-error]",n),r=[];if(a.each(s,(function(t,e){i=a('[data-validate-for="'+t+'"]',n),r=a.merge(r,e),i.length&&(i.text().length&&1!=i.data("emptyMode")||i.data("emptyMode",!0).text(e.join(", ")),i.addClass("visible"))})),d.length&&(d=a("[data-validate-error]",n)),d.length){var l=a("[data-message]",d);if(d.addClass("visible"),l.length){var c=l.first();a.each(r,(function(a,t){c.clone().text(t).insertAfter(c)})),l.remove()}else d.text(o)}n.one("ajaxError",(function(a){a.preventDefault()}))})),a(document).on("ajaxPromise","[data-request][data-request-validate]",(function(){var t=a(this).closest("form");a("[data-validate-for]",t).removeClass("visible"),a("[data-validate-error]",t).removeClass("visible")})),a(document).on("ajaxPromise","[data-request]",(function(){var e=a(this);void 0!==e.data("attach-loading")&&e.addClass(t).prop("disabled",!0),e.is("form")&&a("[data-attach-loading]",e).addClass(t).prop("disabled",!0)})).on("ajaxFail ajaxDone","[data-request]",(function(){var e=a(this);void 0!==e.data("attach-loading")&&e.removeClass(t).prop("disabled",!1),e.is("form")&&a("[data-attach-loading]",e).removeClass(t).prop("disabled",!1)}));var e=function(){var t=this;this.counter=0,this.indicator=a("<div/>").addClass("stripe-loading-indicator loaded").append(a("<div />").addClass("stripe")).append(a("<div />").addClass("stripe-loaded")),this.stripe=this.indicator.find(".stripe"),a(document).ready((function(){a(document.body).append(t.indicator)}))};e.prototype.show=function(){this.counter++,this.stripe.after(this.stripe=this.stripe.clone()).remove(),this.counter>1||(this.indicator.removeClass("loaded"),a(document.body).addClass("oc-loading"))},e.prototype.hide=function(t){this.counter--,void 0!==t&&t&&(this.counter=0),this.counter<=0&&(this.indicator.addClass("loaded"),a(document.body).removeClass("oc-loading"))},a.oc.stripeLoadIndicator=new e,a(document).on("ajaxPromise","[data-request]",(function(t){t.stopPropagation(),a.oc.stripeLoadIndicator.show();var e=a(this);a(window).one("ajaxUpdateComplete",(function(){0===e.closest("html").length&&a.oc.stripeLoadIndicator.hide()}))})).on("ajaxFail ajaxDone","[data-request]",(function(t){t.stopPropagation(),a.oc.stripeLoadIndicator.hide()}));var o=function(t,e){t=a.extend({},o.DEFAULTS,t);var s=a(e);a("body > p.flash-message").remove(),0==s.length&&(s=a("<p />").addClass(t.class).html(t.text)),s.addClass("flash-message fade").attr("data-control",null).on("click","button",d).on("click",d).append('<button type="button" class="close" aria-hidden="true">&times;</button>'),a(document.body).append(s),setTimeout((function(){s.addClass("in")}),100);var i=window.setTimeout(d,1e3*t.interval);function n(){s.remove()}function d(){window.clearInterval(i),s.removeClass("in"),a.support.transition&&s.hasClass("fade")?s.one(a.support.transition.end,n).emulateTransitionEnd(500):n()}};o.DEFAULTS={class:"success",text:"Default text",interval:5},void 0===a.oc&&(a.oc={}),a.oc.flashMsg=o,a(document).render((function(){a("[data-control=flash-message]").each((function(){a.oc.flashMsg(a(this).data(),this)}))}))}(window.jQuery);